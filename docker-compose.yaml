services:
  webhook-service:
    build: .
    image: gitea-jenkins-webhook:latest
    container_name: gitea-jenkins-webhook
    ports:
      - "8080:8080"
    env_file:
      - .env
    volumes:
      - ./config.sample.yaml:/etc/webhook/config.yaml:ro
    restart: unless-stopped

  # Optional services for local development and testing:
  # gitea:
  #   image: gitea/gitea:1.22
  #   container_name: gitea
  #   environment:
  #     - USER_UID=1000
  #     - USER_GID=1000
  #   ports:
  #     - "3000:3000"
  #     - "222:22"
  #   volumes:
  #     - gitea-data:/data
  #
  # jenkins:
  #   image: jenkins/jenkins:lts-jdk17
  #   container_name: jenkins
  #   ports:
  #     - "8081:8080"
  #     - "50000:50000"
  #   volumes:
  #     - jenkins-data:/var/jenkins_home

volumes:
  gitea-data:
  jenkins-data:
